# How to replicate RTextTools results

Analysis scripts needed (all in "01-SupervisedMachineLearning/rtexttools/"):

- "inequality_vs_economic_vs_irrelevant/train_and_classify.R"
- "inequality_vs_not_inequality/train_and_classify.R"
- "relevant_vs_irrelevant/train_and_classify.R"
- "make_metrics_tables.R"
- "make_time_trend_spreadsheet.R"
- "compute_rtexttools_2yr_ma.R"

The training of machine learning models and classification of articles based on those models occurs in the scripts named "train_and_classify.R", one each in the directories "inequality_vs_economic_vs_irrelevant", "inequality_vs_not_inequality", and "relevant_vs_irrelevant". These scripts each generate an output file "results/classification_results_all_training_sets.Rdata", each in its respective directory. Those output files are used to calculate the results found in the paper, as described below.

## Figures 3, 4, and 5

The time trends for the three coding schemes estimated by RTextTools, as plotted in Figures 3, 4, and 5, are based on output in "results/RTT_time_trend_data.csv", generated by "make_time_trend_spreadsheet.R". After generating that output, the two-year moving averages, along with their correlations, can be computed with the script "compute_rtexttools_2yr_ma.R". The correlations in the captions of Figures 3, 4, and 5 are based on trends including all articles, both the training set and the test set.

## Appendix Table D2

The metrics reported in the middle panel of Appendix Table D2, labeled "(2) RTextTools", are based on output in the "results" directory, specifically, the six .csv files with names beginning "inequality_vs_economic_vs_irrelevant", "inequality_vs_not_inequality", and "relevant_vs_irrelevant", all generated by the analysis script "make_metrics_tables.R". The first six columns, and the non-parenthetical metrics in columns 7-9, are based on training set 10 only and can be found in the three .csv files whose names end in "_trset_10.csv". The ranges reported in parentheses in columns 7-9 can be found in the three .csv files whose names end in "_summary_mtrx.csv". Finally, the correlations reported in columns 10 and 11 are calculated in the same way as the correlations in Figures 3, 4, and 5, as described above, except that the correlations reported here are those calculated for the test set only.
